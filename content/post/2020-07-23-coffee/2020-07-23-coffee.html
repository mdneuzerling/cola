---
title: coffee
author: ~
date: '2020-07-23'
slug: coffee
categories: []
tags: []
---



<div id="skimr" class="section level2">
<h2>skimr</h2>
<pre class="r"><code>skimr::skim(coffee)</code></pre>
<table>
<caption><span id="tab:skimr">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">coffee</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">1339</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">43</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">24</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">19</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">species</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">owner</td>
<td align="right">7</td>
<td align="right">0.99</td>
<td align="right">3</td>
<td align="right">50</td>
<td align="right">0</td>
<td align="right">315</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">country_of_origin</td>
<td align="right">1</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">28</td>
<td align="right">0</td>
<td align="right">36</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">farm_name</td>
<td align="right">359</td>
<td align="right">0.73</td>
<td align="right">1</td>
<td align="right">73</td>
<td align="right">0</td>
<td align="right">571</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">lot_number</td>
<td align="right">1063</td>
<td align="right">0.21</td>
<td align="right">1</td>
<td align="right">71</td>
<td align="right">0</td>
<td align="right">227</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">mill</td>
<td align="right">315</td>
<td align="right">0.76</td>
<td align="right">1</td>
<td align="right">77</td>
<td align="right">0</td>
<td align="right">460</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">ico_number</td>
<td align="right">151</td>
<td align="right">0.89</td>
<td align="right">1</td>
<td align="right">40</td>
<td align="right">0</td>
<td align="right">847</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">company</td>
<td align="right">209</td>
<td align="right">0.84</td>
<td align="right">3</td>
<td align="right">73</td>
<td align="right">0</td>
<td align="right">281</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">altitude</td>
<td align="right">226</td>
<td align="right">0.83</td>
<td align="right">1</td>
<td align="right">41</td>
<td align="right">0</td>
<td align="right">396</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">region</td>
<td align="right">59</td>
<td align="right">0.96</td>
<td align="right">2</td>
<td align="right">76</td>
<td align="right">0</td>
<td align="right">356</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">producer</td>
<td align="right">231</td>
<td align="right">0.83</td>
<td align="right">1</td>
<td align="right">100</td>
<td align="right">0</td>
<td align="right">691</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">bag_weight</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">56</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">in_country_partner</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7</td>
<td align="right">85</td>
<td align="right">0</td>
<td align="right">27</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">harvest_year</td>
<td align="right">47</td>
<td align="right">0.96</td>
<td align="right">3</td>
<td align="right">24</td>
<td align="right">0</td>
<td align="right">46</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">grading_date</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">13</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">567</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">owner_1</td>
<td align="right">7</td>
<td align="right">0.99</td>
<td align="right">3</td>
<td align="right">50</td>
<td align="right">0</td>
<td align="right">319</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">variety</td>
<td align="right">226</td>
<td align="right">0.83</td>
<td align="right">4</td>
<td align="right">21</td>
<td align="right">0</td>
<td align="right">29</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">processing_method</td>
<td align="right">170</td>
<td align="right">0.87</td>
<td align="right">5</td>
<td align="right">25</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">color</td>
<td align="right">218</td>
<td align="right">0.84</td>
<td align="right">4</td>
<td align="right">12</td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">expiration</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">13</td>
<td align="right">20</td>
<td align="right">0</td>
<td align="right">566</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">certification_body</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7</td>
<td align="right">85</td>
<td align="right">0</td>
<td align="right">26</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">certification_address</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">0</td>
<td align="right">32</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">certification_contact</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">40</td>
<td align="right">40</td>
<td align="right">0</td>
<td align="right">29</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">unit_of_measurement</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table style="width:100%;">
<colgroup>
<col width="20%" />
<col width="9%" />
<col width="13%" />
<col width="7%" />
<col width="7%" />
<col width="2%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="9%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">total_cup_points</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">82.09</td>
<td align="right">3.50</td>
<td align="right">0</td>
<td align="right">81.08</td>
<td align="right">82.50</td>
<td align="right">83.67</td>
<td align="right">90.58</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">number_of_bags</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">154.18</td>
<td align="right">129.99</td>
<td align="right">0</td>
<td align="right">14.00</td>
<td align="right">175.00</td>
<td align="right">275.00</td>
<td align="right">1062.00</td>
<td align="left">▇▇▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">aroma</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.57</td>
<td align="right">0.38</td>
<td align="right">0</td>
<td align="right">7.42</td>
<td align="right">7.58</td>
<td align="right">7.75</td>
<td align="right">8.75</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">flavor</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.52</td>
<td align="right">0.40</td>
<td align="right">0</td>
<td align="right">7.33</td>
<td align="right">7.58</td>
<td align="right">7.75</td>
<td align="right">8.83</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td align="left">aftertaste</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.40</td>
<td align="right">0.40</td>
<td align="right">0</td>
<td align="right">7.25</td>
<td align="right">7.42</td>
<td align="right">7.58</td>
<td align="right">8.67</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">acidity</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.54</td>
<td align="right">0.38</td>
<td align="right">0</td>
<td align="right">7.33</td>
<td align="right">7.58</td>
<td align="right">7.75</td>
<td align="right">8.75</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td align="left">body</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.52</td>
<td align="right">0.37</td>
<td align="right">0</td>
<td align="right">7.33</td>
<td align="right">7.50</td>
<td align="right">7.67</td>
<td align="right">8.58</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">balance</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.52</td>
<td align="right">0.41</td>
<td align="right">0</td>
<td align="right">7.33</td>
<td align="right">7.50</td>
<td align="right">7.75</td>
<td align="right">8.75</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td align="left">uniformity</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">9.83</td>
<td align="right">0.55</td>
<td align="right">0</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">clean_cup</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">9.84</td>
<td align="right">0.76</td>
<td align="right">0</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="odd">
<td align="left">sweetness</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">9.86</td>
<td align="right">0.62</td>
<td align="right">0</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="right">10.00</td>
<td align="left">▁▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">cupper_points</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.50</td>
<td align="right">0.47</td>
<td align="right">0</td>
<td align="right">7.25</td>
<td align="right">7.50</td>
<td align="right">7.75</td>
<td align="right">10.00</td>
<td align="left">▁▁▁▇▁</td>
</tr>
<tr class="odd">
<td align="left">moisture</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.09</td>
<td align="right">0.05</td>
<td align="right">0</td>
<td align="right">0.09</td>
<td align="right">0.11</td>
<td align="right">0.12</td>
<td align="right">0.28</td>
<td align="left">▃▇▅▁▁</td>
</tr>
<tr class="even">
<td align="left">category_one_defects</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">0.48</td>
<td align="right">2.55</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">63.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">quakers</td>
<td align="right">1</td>
<td align="right">1.00</td>
<td align="right">0.17</td>
<td align="right">0.83</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">0.00</td>
<td align="right">11.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">category_two_defects</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">3.56</td>
<td align="right">5.31</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">2.00</td>
<td align="right">4.00</td>
<td align="right">55.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">altitude_low_meters</td>
<td align="right">230</td>
<td align="right">0.83</td>
<td align="right">1750.71</td>
<td align="right">8669.44</td>
<td align="right">1</td>
<td align="right">1100.00</td>
<td align="right">1310.64</td>
<td align="right">1600.00</td>
<td align="right">190164.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="even">
<td align="left">altitude_high_meters</td>
<td align="right">230</td>
<td align="right">0.83</td>
<td align="right">1799.35</td>
<td align="right">8668.81</td>
<td align="right">1</td>
<td align="right">1100.00</td>
<td align="right">1350.00</td>
<td align="right">1650.00</td>
<td align="right">190164.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">altitude_mean_meters</td>
<td align="right">230</td>
<td align="right">0.83</td>
<td align="right">1775.03</td>
<td align="right">8668.63</td>
<td align="right">1</td>
<td align="right">1100.00</td>
<td align="right">1310.64</td>
<td align="right">1600.00</td>
<td align="right">190164.00</td>
<td align="left">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<div id="visdat" class="section level2">
<h2>visdat</h2>
<pre class="r"><code>visdat::vis_dat(coffee)</code></pre>
<p><img src="/post/2020-07-23-coffee/2020-07-23-coffee_files/figure-html/visdat-1.png" width="960" /></p>
</div>
<div id="ggplot" class="section level2">
<h2>ggplot</h2>
<pre class="r"><code>coffee %&gt;% 
  filter(!is.na(country_of_origin)) %&gt;%
  inner_join(
    coffee %&gt;%
      group_by(country_of_origin) %&gt;% 
      summarise(n = n(), average_cupper_points = mean(cupper_points)) %&gt;%
      filter(n / sum(n) &gt; 0.01),
    by = &quot;country_of_origin&quot;
  ) %&gt;% 
  ggplot(aes(
    x = cupper_points,
    y = fct_reorder(country_of_origin, average_cupper_points),
    fill = average_cupper_points
  )) + 
  ggridges::geom_density_ridges() +
  xlim(5, 10) +
  scale_fill_gradient(low = &quot;#A8805C&quot;, high = &quot;#5F3622&quot;) +
  ggtitle(&quot;Coffee quality by country of origin&quot;) +
  xlab(&quot;cupper points&quot;) +
  ylab(NULL) +
  theme_minimal(base_size = 16, base_family = &quot;Montserrat&quot;) +
  theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="/post/2020-07-23-coffee/2020-07-23-coffee_files/figure-html/coffee-plot-1.png" width="960" /></p>
</div>
